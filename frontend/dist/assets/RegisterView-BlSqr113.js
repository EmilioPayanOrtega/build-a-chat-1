import{d as V,r as d,c as a,a as t,b as i,w as E,e as f,v as g,f as b,t as _,g as R,h as L,i as U,n as q,u as B,o}from"./index-IGaj96A5.js";import{s as M}from"./api-DOUZDINy.js";const N={class:"w-full flex justify-center items-center animate-fade-in py-8"},T={class:"card"},j={class:"field"},z={key:0,class:"text-red-500 text-xs mt-1"},S={class:"field"},D={key:0,class:"text-red-500 text-xs mt-1"},I={key:1,class:"text-red-500 text-xs mt-1"},A={class:"field"},F={key:0,class:"text-red-500 text-xs mt-1"},H={key:1,class:"text-red-500 text-xs mt-1"},Y={class:"field"},$={key:0,class:"text-red-500 text-xs mt-1"},G={key:1,class:"text-red-500 text-xs mt-1"},J={class:"flex gap-3 pt-2"},K=["disabled"],O=["disabled"],P={key:0,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Q={class:"mt-6 text-center text-sm text-gray-600"},ee=V({__name:"RegisterView",setup(W){const v=d(""),r=d(""),s=d(""),u=d(""),m=d(!1),p=d(""),x=d("ok"),l=d(!1),h=B();function y(n){return/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(n)}async function k(){if(p.value="",l.value=!1,!v.value||!r.value||!s.value||!u.value||s.value!==u.value||s.value.length<6||!y(r.value)){l.value=!0;return}m.value=!0;try{const n=await M({nombre_usuario:v.value,email:r.value,password:s.value});n.success?(p.value=n.msg||"¡Registro exitoso!",x.value="ok",w(),setTimeout(()=>{h.push("/login")},1500)):(p.value=n.error||"Error al registrar usuario",x.value="error",m.value=!1)}catch(n){p.value=n instanceof Error?n.message:"Error al registrar usuario",x.value="error",m.value=!1}}function w(){v.value="",r.value="",s.value="",u.value=""}return(n,e)=>{const C=U("RouterLink");return o(),a("section",N,[t("div",T,[e[11]||(e[11]=t("h2",{class:"page-title"},"Registro de usuario",-1)),t("form",{onSubmit:E(k,["prevent"]),novalidate:"",class:"space-y-4"},[t("div",j,[e[4]||(e[4]=t("label",{for:"username",class:"text-sm font-medium text-gray-700 mb-1"},"Usuario",-1)),f(t("input",{id:"username","onUpdate:modelValue":e[0]||(e[0]=c=>v.value=c),class:"input",name:"username",type:"text",autocomplete:"username",placeholder:"Elige un nombre de usuario",required:""},null,512),[[g,v.value,void 0,{trim:!0}]]),l.value&&!v.value?(o(),a("span",z,"El usuario es obligatorio")):i("",!0)]),t("div",S,[e[5]||(e[5]=t("label",{for:"email",class:"text-sm font-medium text-gray-700 mb-1"},"Correo electrónico",-1)),f(t("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=c=>r.value=c),class:"input",name:"email",type:"email",autocomplete:"email",placeholder:"ejemplo@correo.com",required:""},null,512),[[g,r.value,void 0,{trim:!0}]]),l.value&&!r.value?(o(),a("span",D,"El correo es obligatorio")):i("",!0),l.value&&r.value&&!y(r.value)?(o(),a("span",I,"El correo no es válido")):i("",!0)]),t("div",A,[e[6]||(e[6]=t("label",{for:"password",class:"text-sm font-medium text-gray-700 mb-1"},"Contraseña",-1)),f(t("input",{id:"password","onUpdate:modelValue":e[2]||(e[2]=c=>s.value=c),class:"input",name:"password",type:"password",autocomplete:"new-password",placeholder:"••••••••",required:"",minlength:"6"},null,512),[[g,s.value]]),l.value&&!s.value?(o(),a("span",F,"La contraseña es obligatoria")):i("",!0),l.value&&s.value&&s.value.length<6?(o(),a("span",H,"Mínimo 6 caracteres")):i("",!0)]),t("div",Y,[e[7]||(e[7]=t("label",{for:"confirm",class:"text-sm font-medium text-gray-700 mb-1"},"Confirmar contraseña",-1)),f(t("input",{id:"confirm","onUpdate:modelValue":e[3]||(e[3]=c=>u.value=c),class:"input",name:"confirm",type:"password",autocomplete:"new-password",placeholder:"••••••••",required:"",minlength:"6"},null,512),[[g,u.value]]),l.value&&!u.value?(o(),a("span",$,"Confirma tu contraseña")):i("",!0),l.value&&u.value&&s.value!==u.value?(o(),a("span",G,"Las contraseñas no coinciden")):i("",!0)]),t("div",J,[t("button",{class:"btn bg-gray-200 text-gray-700 hover:bg-gray-300 flex-1",type:"button",onClick:w,disabled:m.value}," Limpiar ",8,K),t("button",{class:"btn primary flex-1 flex justify-center items-center gap-2",type:"submit",disabled:m.value},[m.value?(o(),a("svg",P,[...e[8]||(e[8]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):i("",!0),b(" "+_(m.value?"Registrando…":"Registrarse"),1)],8,O)])],32),t("p",Q,[e[10]||(e[10]=b(" ¿Ya tienes cuenta? ",-1)),R(C,{to:"/login",class:"font-medium text-blue-600 hover:text-blue-500 transition-colors"},{default:L(()=>[...e[9]||(e[9]=[b("Inicia sesión",-1)])]),_:1})]),p.value?(o(),a("div",{key:0,class:q(["mt-4 p-3 rounded-lg text-sm text-center font-medium",x.value==="error"?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200"])},_(p.value),3)):i("",!0)])])}}});export{ee as default};
